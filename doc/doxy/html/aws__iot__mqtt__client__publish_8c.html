<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP32 Quick Start Building Blocks: examples/aws_iot/source/components/aws_iot/aws-iot-device-sdk-embedded-C/src/aws_iot_mqtt_client_publish.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="2" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ESP32 Quick Start Building Blocks
   </div>
   <!-- PROJECT BRIEF is expected to be a URL -->
   <div id="projectbrief"><a href=https://github.com/IoTReady/esp32_firmware_base>https://github.com/IoTReady/esp32_firmware_base</a></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('aws__iot__mqtt__client__publish_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">aws_iot_mqtt_client_publish.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>MQTT client publish API definitions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="aws__iot__mqtt__client__common__internal_8h_source.html">aws_iot_mqtt_client_common_internal.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3d177fd562d07079c9d1f7b98fd8dd45"><td class="memItemLeft" align="right" valign="top"><a class="el" href="aws__iot__error_8h.html#a329da5c3a42979b72561e28e749f6921">IoT_Error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__mqtt__client__publish_8c.html#a3d177fd562d07079c9d1f7b98fd8dd45">aws_iot_mqtt_internal_serialize_ack</a> (unsigned char *pTxBuf, size_t txBufLen, <a class="el" href="aws__iot__mqtt__client__common__internal_8h.html#ae72e27d9538bf1665674cb4dfff56d6b">MessageTypes</a> msgType, uint8_t dup, uint16_t packetId, uint32_t *pSerializedLen)</td></tr>
<tr class="separator:a3d177fd562d07079c9d1f7b98fd8dd45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfbb8ea42852aefdae444f91fdfcd26d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="aws__iot__error_8h.html#a329da5c3a42979b72561e28e749f6921">IoT_Error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__mqtt__client__publish_8c.html#acfbb8ea42852aefdae444f91fdfcd26d">aws_iot_mqtt_publish</a> (<a class="el" href="aws__iot__mqtt__client_8h.html#af8e1cecd05a26fe36de70921f96ba426">AWS_IoT_Client</a> *pClient, const char *pTopicName, uint16_t topicNameLen, <a class="el" href="struct_io_t___publish___message___params.html">IoT_Publish_Message_Params</a> *pParams)</td></tr>
<tr class="memdesc:acfbb8ea42852aefdae444f91fdfcd26d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish an MQTT message on a topic.  <a href="aws__iot__mqtt__client__publish_8c.html#acfbb8ea42852aefdae444f91fdfcd26d">More...</a><br /></td></tr>
<tr class="separator:acfbb8ea42852aefdae444f91fdfcd26d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48c5dbdd13ba1a82836e42483f0b7f3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="aws__iot__error_8h.html#a329da5c3a42979b72561e28e749f6921">IoT_Error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__mqtt__client__publish_8c.html#a48c5dbdd13ba1a82836e42483f0b7f3a">aws_iot_mqtt_internal_deserialize_publish</a> (uint8_t *dup, <a class="el" href="aws__iot__mqtt__client_8h.html#a2a5744b0ca3f049979e6777b75d7a634">QoS</a> *qos, uint8_t *retained, uint16_t *pPacketId, char **pTopicName, uint16_t *topicNameLen, unsigned char **payload, size_t *payloadLen, unsigned char *pRxBuf, size_t rxBufLen)</td></tr>
<tr class="separator:a48c5dbdd13ba1a82836e42483f0b7f3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affbfa488ea2bd1b75de0961d95c42f07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="aws__iot__error_8h.html#a329da5c3a42979b72561e28e749f6921">IoT_Error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__mqtt__client__publish_8c.html#affbfa488ea2bd1b75de0961d95c42f07">aws_iot_mqtt_internal_deserialize_ack</a> (unsigned char *pPacketType, unsigned char *dup, uint16_t *pPacketId, unsigned char *pRxBuf, size_t rxBuflen)</td></tr>
<tr class="separator:affbfa488ea2bd1b75de0961d95c42f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>MQTT client publish API definitions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="affbfa488ea2bd1b75de0961d95c42f07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affbfa488ea2bd1b75de0961d95c42f07">&#9670;&nbsp;</a></span>aws_iot_mqtt_internal_deserialize_ack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="aws__iot__error_8h.html#a329da5c3a42979b72561e28e749f6921">IoT_Error_t</a> aws_iot_mqtt_internal_deserialize_ack </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>pPacketType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>dup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>pPacketId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>pRxBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rxBuflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deserializes the supplied (wire) buffer into an ack </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pPacketType</td><td>returned integer - the MQTT packet type </td></tr>
    <tr><td class="paramname">dup</td><td>returned integer - the MQTT dup flag </td></tr>
    <tr><td class="paramname">pPacketId</td><td>returned integer - the MQTT packet identifier </td></tr>
    <tr><td class="paramname">pRxBuf</td><td>the raw buffer data, of the correct length determined by the remaining length field </td></tr>
    <tr><td class="paramname">rxBuflen</td><td>the length in bytes of the data in the supplied buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An IoT Error Type defining successful/failed call </dd></dl>

</div>
</div>
<a id="a48c5dbdd13ba1a82836e42483f0b7f3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48c5dbdd13ba1a82836e42483f0b7f3a">&#9670;&nbsp;</a></span>aws_iot_mqtt_internal_deserialize_publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="aws__iot__error_8h.html#a329da5c3a42979b72561e28e749f6921">IoT_Error_t</a> aws_iot_mqtt_internal_deserialize_publish </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="aws__iot__mqtt__client_8h.html#a2a5744b0ca3f049979e6777b75d7a634">QoS</a> *&#160;</td>
          <td class="paramname"><em>qos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>retained</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>pPacketId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>pTopicName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>topicNameLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char **&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>payloadLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>pRxBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rxBufLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deserializes the supplied (wire) buffer into publish data </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dup</td><td>returned uint8_t - the MQTT dup flag </td></tr>
    <tr><td class="paramname">qos</td><td>returned QoS type - the MQTT QoS value </td></tr>
    <tr><td class="paramname">retained</td><td>returned uint8_t - the MQTT retained flag </td></tr>
    <tr><td class="paramname">pPacketId</td><td>returned uint16_t - the MQTT packet identifier </td></tr>
    <tr><td class="paramname">pTopicName</td><td>returned String - the MQTT topic in the publish </td></tr>
    <tr><td class="paramname">topicNameLen</td><td>returned uint16_t - the length of the MQTT topic in the publish </td></tr>
    <tr><td class="paramname">payload</td><td>returned byte buffer - the MQTT publish payload </td></tr>
    <tr><td class="paramname">payloadlen</td><td>returned size_t - the length of the MQTT payload </td></tr>
    <tr><td class="paramname">pRxBuf</td><td>the raw buffer data, of the correct length determined by the remaining length field </td></tr>
    <tr><td class="paramname">rxBufLen</td><td>the length in bytes of the data in the supplied buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An IoT Error Type defining successful/failed call </dd></dl>

</div>
</div>
<a id="a3d177fd562d07079c9d1f7b98fd8dd45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d177fd562d07079c9d1f7b98fd8dd45">&#9670;&nbsp;</a></span>aws_iot_mqtt_internal_serialize_ack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="aws__iot__error_8h.html#a329da5c3a42979b72561e28e749f6921">IoT_Error_t</a> aws_iot_mqtt_internal_serialize_ack </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>pTxBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>txBufLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="aws__iot__mqtt__client__common__internal_8h.html#ae72e27d9538bf1665674cb4dfff56d6b">MessageTypes</a>&#160;</td>
          <td class="paramname"><em>msgType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>packetId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pSerializedLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Serializes the ack packet into the supplied buffer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pTxBuf</td><td>the buffer into which the packet will be serialized </td></tr>
    <tr><td class="paramname">txBufLen</td><td>the length in bytes of the supplied buffer </td></tr>
    <tr><td class="paramname">msgType</td><td>the MQTT packet type </td></tr>
    <tr><td class="paramname">dup</td><td>the MQTT dup flag </td></tr>
    <tr><td class="paramname">packetId</td><td>the MQTT packet identifier </td></tr>
    <tr><td class="paramname">pSerializedLen</td><td>uint32_t - pointer to the variable that stores serialized len</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An IoT Error Type defining successful/failed call </dd></dl>

</div>
</div>
<a id="acfbb8ea42852aefdae444f91fdfcd26d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfbb8ea42852aefdae444f91fdfcd26d">&#9670;&nbsp;</a></span>aws_iot_mqtt_publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="aws__iot__error_8h.html#a329da5c3a42979b72561e28e749f6921">IoT_Error_t</a> aws_iot_mqtt_publish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="aws__iot__mqtt__client_8h.html#af8e1cecd05a26fe36de70921f96ba426">AWS_IoT_Client</a> *&#160;</td>
          <td class="paramname"><em>pClient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pTopicName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>topicNameLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_io_t___publish___message___params.html">IoT_Publish_Message_Params</a> *&#160;</td>
          <td class="paramname"><em>pParams</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish an MQTT message on a topic. </p>
<p>Called to publish an MQTT message on a topic. </p><dl class="section note"><dt>Note</dt><dd>Call is blocking. In the case of a QoS 0 message the function returns after the message was successfully passed to the TLS layer. In the case of QoS 1 the function returns after the receipt of the PUBACK control packet. This is the outer function which does the validations and calls the internal publish above to perform the actual operation. It is also responsible for client state changes</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pClient</td><td>Reference to the IoT Client </td></tr>
    <tr><td class="paramname">pTopicName</td><td>Topic Name to publish to </td></tr>
    <tr><td class="paramname">topicNameLen</td><td>Length of the topic name </td></tr>
    <tr><td class="paramname">pParams</td><td>Pointer to Publish Message parameters</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An IoT Error Type defining successful/failed publish </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="dir_3fee47541fc6cf269bed241bf232fc5a.html">aws_iot</a></li><li class="navelem"><a class="el" href="dir_c80b714e586bb62c1a6e448a61c4a02c.html">source</a></li><li class="navelem"><a class="el" href="dir_3aa8e0353840e7cda381351e99e4713b.html">components</a></li><li class="navelem"><a class="el" href="dir_c97c4e169c902b6f0b7ae5d35f7a6e4a.html">aws_iot</a></li><li class="navelem"><a class="el" href="dir_e7b81f582a226519be2751d941b93ce2.html">aws-iot-device-sdk-embedded-C</a></li><li class="navelem"><a class="el" href="dir_cfd0ffaec2caee9c4e06a33d84d4b1a7.html">src</a></li><li class="navelem"><a class="el" href="aws__iot__mqtt__client__publish_8c.html">aws_iot_mqtt_client_publish.c</a></li>
    <li class="footer">Generated by <a href="https://iotready.co"> IoTReady </a><img class="footer" src="logo.png" width="30" height="30" alt="IoTReady"/></a></li>
  </ul>
</div>
</body>
</html>
